model_list:
- model_name: GLM-4.6-nano
  protected: true
  model_params:
    api_type: openai
    model: z-ai/glm-4.6:thinking
    api_base: https://nano-gpt.com/api/v1thinking
    api_key: ${NANOGPT_API_KEY}
    supports_reasoning: true
    request_timeout: 540
- model_name: GLM-4.7
  protected: true
  model_params:
    api_type: openai
    model: GLM-4.7
    api_base: https://api.z.ai/api/coding/paas/v4
    api_key: ${GLM_API_KEY}
    thinking:
      type: enabled
    request_timeout: 540
    parameters:
      temperature:
        default: 0.9
        allow_override: false
      top_p:
        default: 0.95
        allow_override: false
  modules:
    upstream:
      enabled: true
      response:
      - swap_reasoning_content
      swap_reasoning_content:
        mode: reasoning_to_content
        think_tag: think
        think_open:
          prefix: ''
          suffix: ''
        think_close:
          prefix: ''
          suffix: ''
        include_newline: false
- model_name: MiniMax-M2.1
  protected: true
  model_params:
    api_type: openai
    model: MiniMax-M2.1
    api_base: https://api.minimax.io/v1
    api_key: ${MINIMAX_API_KEY}
    request_timeout: 540
    parameters:
      temperature:
        default: 1.0
        allow_override: false
      top_p:
        default: 0.95
        allow_override: false
      top_k:
        default: 40
        allow_override: false
- model_name: MiniMax-M2-nano
  protected: true
  model_params:
    api_type: openai
    model: MiniMax-M2
    api_base: https://nano-gpt.com/api/v1thinking
    api_key: ${NANOGPT_API_KEY}
    supports_reasoning: true
    request_timeout: 540
- model_name: Kimi-K2-Thinking-nano
  model_params:
    api_base: https://nano-gpt.com/api/v1thinking
    model: moonshotai/kimi-k2-thinking
    request_timeout: 540
    api_type: openai
    supports_reasoning: true
    api_key: ${NANOGPT_API_KEY}
  modules:
    upstream:
      enabled: true
      response:
      - parse_tags
      parse_tags:
        template_path: configs/jinja_templates/k2thinking.jinja
        parse_thinking: false
        parse_tool_calls: true
        # tool_arg_format auto-detected from template (json for K2)
  protected: true
router_settings:
  num_retries: 1
proxy_settings:
  server:
    host: 127.0.0.1
    port: 7979
  enable_responses_endpoint: false
  logging:
    log_parsed_response: true
    log_parsed_stream: true
  modules:
    upstream:
      enabled: false
      response:
      - parse_tags
      - swap_reasoning_content
      paths:
      - /chat/completions
      parse_tags:
        # template_path: configs/jinja_templates/template_example.jinja  # Optional: auto-detect from template
        parse_thinking: true
        parse_tool_calls: true
        think_tag: think
        tool_arg_format: xml       # xml | json (for K2-style JSON arguments)
        tool_tag: tool_call        # For xml format
      swap_reasoning_content:
        mode: reasoning_to_content
        think_tag: think
        think_open:
          prefix: ''
          suffix: ''
        think_close:
          prefix: ''
          suffix: ''
        include_newline: true
    downstream:
      enabled: false
      request: []

# App Key Authentication (optional)
# Uncomment and configure to require API keys for proxy access
# app_keys:
#   enabled: false                    # Set to true to enable app key authentication
#   header_name: x-api-key            # Header name for API key (also accepts Authorization: Bearer)
#   allow_unauthenticated: false      # Allow requests without a key when enabled
#   keys:
#     - key_id: "app-dev-001"
#       secret: "${APP_KEY_DEV}"      # Use env var for secrets
#       name: "Development"
#       description: "Development team access"
#       enabled: true
#       # FUTURE (not yet implemented):
#       # rate_limits:
#       #   requests_per_minute: 100
#       #   tokens_per_day: 1000000
#       # priority: normal            # low, normal, high, critical
#
# Per-model access control (add to model_list entries):
#   access_control:
#     allowed_keys: all               # "all" (default), "none", or list of key_ids
#     # allowed_keys:
#     #   - app-prod-001
#     #   - app-dev-001

forwarder_settings:
  listen:
    host: 0.0.0.0
    port: 6969
  target:
    host: 127.0.0.1
    port: 7979
http_forwarder_settings:
  preserve_host: true
  listen:
    host: 0.0.0.0
    port: 6969
  target:
    scheme: http
    host: 127.0.0.1
    port: 7979
database:
  backend: sqlite
  connection:
    sqlite:
      path: logs/yaLLM.db
    #postgres:
    #  host: localhost
    #  port: 5432
    #  database: yallm_proxy
    #  user: ${DB_USER}
    #  password: ${DB_PASSWORD}
  pool_size: 5
  max_overflow: 10
